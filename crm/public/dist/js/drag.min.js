!function(){this.Drag=function(){var t={board:".board",cards:".card",cloneCardClass:"cloned-card",cloneListClass:"cloned-list",activeCardClass:"dragging-active-card",activeListClass:"dragging-active-list",lists:".list",listTitle:".list-title",listContent:".list-content",lockClass:"lock",direction:"vertical"};arguments[0]&&"object"==typeof arguments[0]?this.options=function t(e,i){var o;for(o in i)i.hasOwnProperty(o)&&(e[o]=i[o]);return e}(t,arguments[0]):this.options=t},Drag.prototype.init=function(){var t,e,i,o,n,l,s,c,r,d,g,f,a,u,p,h,$=this,C=0,v=0,B=0,R=0,y=0,L=0,b=document.body,m=window,_=document.querySelector($.options.board);function E(i){var o=document.querySelectorAll($.options.lists);"touchstart"===i.type?(i.preventDefault(),t=i.touches[0].clientX,e=i.touches[0].clientY,C=i.touches[0].clientX,v=i.touches[0].clientY):(t=i.clientX,e=i.clientY,C=i.clientX,v=i.clientY),o.forEach(function(t,e){var o=t.querySelectorAll($.options.cards),s=t.querySelector($.options.listTitle);(i.target===s||s.contains(i.target))&&(l=t,a=!0,u=e),o.forEach(function(o,l){(i.target===o||o.contains(i.target))&&(n=o,h=t,f=!0,p=l,u=e)})})}function S(u){if(n){if(f){var p=n.cloneNode(!0);b.style.position="relative",b.style.overflow="hidden",(g=document.createElement("div")).classList.add($.options.cloneCardClass),g.style.position="absolute",g.style.zIndex="1000",b.prepend(g),g.appendChild(p),B=n.getBoundingClientRect().left,R=n.getBoundingClientRect().top,y=n.getBoundingClientRect().right,L=n.getBoundingClientRect().bottom,g.style.width=n.offsetWidth+"px",g.style.height=n.offsetHeight+"px",p.style.cursor="grabbing",g.firstChild.style.margin="0px",g.style.left=B+"px",g.style.top=R+"px",n.classList.add($.options.activeCardClass),f=!1}"touchmove"===u.type?(u.preventDefault(),i=u.touches[0].clientX-t+B,o=u.touches[0].clientY-e+R):(u.preventDefault(),i=u.clientX-t+B,o=u.clientY-e+R);var h=g.getBoundingClientRect().top+g.offsetHeight/2,m=g.getBoundingClientRect().left+g.offsetWidth/2,E=document.querySelectorAll($.options.lists);n.classList.contains($.options.lockClass)||(g.style.left=i+"px"),g.style.top=o+"px",E.forEach(function(t){if("vertical"===$.options.direction){var e=t.getBoundingClientRect().left,i=t.getBoundingClientRect().right;if(m>e&&m<i){var o=t.querySelectorAll($.options.cards);if(o.length){var l=[];o.forEach(function(t){var e=t.getBoundingClientRect().top+g.offsetHeight/2;l.push(Math.abs(h-e))});var s=l.indexOf(Math.min.apply(Math,l)),c=o[s];c!==n&&(h>c.getBoundingClientRect().top+g.offsetHeight/2?c.parentNode.insertBefore(n,c.nextSibling):h<c.getBoundingClientRect().top+g.offsetHeight/2&&c.parentNode.insertBefore(n,c))}else t.querySelector($.options.listContent).appendChild(n)}}if("horizontal"===$.options.direction){var r=t.getBoundingClientRect().top,d=t.getBoundingClientRect().bottom;if(h>r&&h<d){var o=t.querySelectorAll($.options.cards);if(o.length){var l=[];o.forEach(function(t){var e=t.getBoundingClientRect().left+g.offsetWidth/2;l.push(Math.abs(m-e))});var s=l.indexOf(Math.min.apply(Math,l)),c=o[s];c!==n&&(m>c.getBoundingClientRect().left+g.offsetWidth/2?c.parentNode.insertBefore(n,c.nextSibling):m<c.getBoundingClientRect().left+g.offsetWidth/2&&c.parentNode.insertBefore(n,c))}else t.querySelector($.options.listContent).appendChild(n)}}}),E.forEach(function(t){if(t.contains(n)){var e=t.querySelector($.options.listContent);if("vertical"===$.options.direction){if(g.getBoundingClientRect().bottom>e.getBoundingClientRect().bottom-100&&e.scrollHeight-e.scrollTop!==e.clientHeight&&g.getBoundingClientRect().top-R>50){var i=parseInt((b.getBoundingClientRect().bottom-g.getBoundingClientRect().bottom)*.05),o=parseInt((g.getBoundingClientRect().bottom-e.getBoundingClientRect().bottom+100)*.02);clearInterval(s),s=setInterval(function(){e.scrollTop=e.scrollTop+o},i),e.addEventListener("scroll",function(){e.scrollHeight-e.scrollTop===e.clientHeight&&clearInterval(s)})}else clearInterval(s);if(g.getBoundingClientRect().top<e.getBoundingClientRect().top+100&&0!==e.scrollTop&&L-g.getBoundingClientRect().bottom>50){var l=parseInt(.05*g.getBoundingClientRect().top),f=parseInt((e.getBoundingClientRect().top+100-g.getBoundingClientRect().top)*.02);clearInterval(c),c=setInterval(function(){e.scrollTop=e.scrollTop-f},l),e.addEventListener("scroll",function(){0===e.scrollTop&&clearInterval(c)})}else clearInterval(c)}if("horizontal"===$.options.direction){if(g.getBoundingClientRect().right>e.getBoundingClientRect().right-100&&e.scrollWidth-e.scrollLeft!==e.clientWidth&&g.getBoundingClientRect().left-B>50){var a=parseInt((b.getBoundingClientRect().right-g.getBoundingClientRect().right)*.05),u=parseInt((g.getBoundingClientRect().right-e.getBoundingClientRect().right+100)*.02);clearInterval(r),r=setInterval(function(){e.scrollLeft=e.scrollLeft+u},a),e.addEventListener("scroll",function(){e.scrollWidth-e.scrollLeft===e.clientWidth&&clearInterval(r)})}else clearInterval(r);if(g.getBoundingClientRect().left<e.getBoundingClientRect().left+100&&0!==e.scrollLeft&&y-g.getBoundingClientRect().right>50){var p=parseInt(.05*g.getBoundingClientRect().left),h=parseInt((e.getBoundingClientRect().left+100-g.getBoundingClientRect().left)*.02);clearInterval(d),d=setInterval(function(){e.scrollLeft=e.scrollLeft-h},p),e.addEventListener("scroll",function(){0===e.scrollLeft&&clearInterval(d)})}else clearInterval(d)}}})}if(l){if(a){var S=l.cloneNode(!0);b.style.position="relative",b.style.overflow="hidden",(g=document.createElement("div")).classList.add($.options.cloneListClass),g.style.position="absolute",g.style.zIndex="1000",b.prepend(g),g.appendChild(S),B=l.getBoundingClientRect().left,R=l.getBoundingClientRect().top,y=l.getBoundingClientRect().right,L=l.getBoundingClientRect().bottom,g.style.width=l.offsetWidth+"px",g.style.height=l.offsetHeight+"px",S.querySelector($.options.listTitle).style.cursor="grabbing",g.style.left=B+"px",g.style.top=R+"px",l.classList.add($.options.activeListClass),a=!1}"touchmove"===u.type?(i=u.touches[0].clientX-t+B,o=u.touches[0].clientY-e+R):(i=u.clientX-t+B,o=u.clientY-e+R);var h=g.getBoundingClientRect().top+g.offsetHeight/2,m=g.getBoundingClientRect().left+g.offsetWidth/2,E=document.querySelectorAll($.options.lists),x=[],q=[];if(g.style.left=i+"px",l.classList.contains($.options.lockClass)||(g.style.top=o+"px"),"vertical"===$.options.direction){var T=[];E.forEach(function(t){if(t!==l&&t!==g.querySelector(".list")){q.push(t);var e=t.getBoundingClientRect().left+t.offsetWidth/2;T.push(Math.abs(e-m))}});var H=q[T.indexOf(Math.min.apply(Math,T))];H&&m>H.getBoundingClientRect().left&&m<H.getBoundingClientRect().left+H.offsetWidth/2?_.insertBefore(l,H.nextSibling):H&&m<H.getBoundingClientRect().right&&m>H.getBoundingClientRect().right-H.offsetWidth/2&&_.insertBefore(l,H)}if("horizontal"===$.options.direction){var W=[];E.forEach(function(t){if(t!==l&&t!==g.querySelector(".list")){x.push(t);var e=t.getBoundingClientRect().top+t.offsetHeight/2;W.push(Math.abs(e-h))}});var A=x[W.indexOf(Math.min.apply(Math,W))];A&&h>A.getBoundingClientRect().top&&h<A.getBoundingClientRect().top+A.offsetHeight/2?_.insertBefore(l,A.nextSibling):A&&h<A.getBoundingClientRect().bottom&&h>A.getBoundingClientRect().bottom-A.offsetHeight/2&&_.insertBefore(l,A)}}if(g){if("vertical"===$.options.direction){if(g.getBoundingClientRect().right>_.getBoundingClientRect().right-100&&_.scrollWidth-_.scrollLeft!==_.clientWidth&&g.getBoundingClientRect().left-B>50){var X=parseInt((g.getBoundingClientRect().right-_.getBoundingClientRect().right+100)*.05);clearInterval(r),r=setInterval(function(){_.scrollLeft=_.scrollLeft+X},10),_.addEventListener("scroll",function(){_.scrollWidth-_.scrollLeft===_.clientWidth&&clearInterval(r)})}else clearInterval(r);if(g.getBoundingClientRect().left<_.getBoundingClientRect().left+100&&0!==_.scrollLeft&&y-g.getBoundingClientRect().right>50){var Y=parseInt((_.getBoundingClientRect().left+100-g.getBoundingClientRect().left)*.05);clearInterval(d),d=setInterval(function(){_.scrollLeft=_.scrollLeft-Y},10),_.addEventListener("scroll",function(){0===_.scrollLeft&&clearInterval(d)})}else clearInterval(d)}if("horizontal"===$.options.direction){if(g.getBoundingClientRect().bottom>_.getBoundingClientRect().bottom-100&&_.scrollHeight-_.scrollTop!==_.clientHeight&&g.getBoundingClientRect().top-R>50){var w=parseInt((g.getBoundingClientRect().bottom-_.getBoundingClientRect().bottom+100)*.05);clearInterval(s),s=setInterval(function(){_.scrollTop=_.scrollTop+w},10),_.addEventListener("scroll",function(){_.scrollHeight-_.scrollTop===_.clientHeight&&clearInterval(s)})}else clearInterval(s);if(g.getBoundingClientRect().top<_.getBoundingClientRect().top+100&&0!==_.scrollTop&&L-g.getBoundingClientRect().bottom>50){var z=parseInt((_.getBoundingClientRect().top+100-g.getBoundingClientRect().top)*.05);clearInterval(c),c=setInterval(function(){_.scrollTop=_.scrollTop-z},10),_.addEventListener("scroll",function(){0===_.scrollTop&&clearInterval(c)})}else clearInterval(c)}}"touchmove"===u.type?(C=u.touches[0].clientX,v=u.touches[0].clientY):(C=u.clientX,v=u.clientY)}function x(t){if(g&&(g.remove(),g=void 0),n){var e=document.querySelectorAll($.options.lists);e.forEach(function(t,e){t.querySelectorAll($.options.cards).forEach(function(i,o){n===i&&(p!==o||t!==h)&&$.options.onCardMoved&&$.options.onCardMoved({from:{list_order:u+1,card_order:p+1,list:h},to:{list_order:e+1,card_order:o+1,list:t},card:i})})}),u=void 0,p=void 0,h=void 0,n.classList.remove($.options.activeCardClass),n=void 0,b.removeAttribute("style"),B=0,R=0,y=0,L=0,clearInterval(c),clearInterval(s),clearInterval(r),clearInterval(d),f=!1}if(l){var e=document.querySelectorAll($.options.lists);e.forEach(function(t,e){l===t&&u!==e&&$.options.onListMoved&&$.options.onListMoved({from:{list_order:u+1},to:{list_order:e+1},list:t})}),u=void 0,p=void 0,l.classList.remove($.options.activeListClass),l=void 0,b.removeAttribute("style"),B=0,R=0,y=0,L=0,clearInterval(r),clearInterval(d),g&&(g.remove(),g=void 0),a=!1}}document.querySelectorAll($.options.cards).forEach(function(t){t.style.cursor="grab"}),document.querySelectorAll($.options.lists).forEach(function(t){t.querySelector($.options.listTitle).style.cursor="grab"}),m.addEventListener("mousedown",E,!1),m.addEventListener("mousemove",S,!1),m.addEventListener("mouseup",x,!1),m.addEventListener("touchstart",E,!1),m.addEventListener("touchmove",S,{passive:!1}),m.addEventListener("touchend",x)}}();